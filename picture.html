<!doctype html>

<html>
    <title>
        Picture
    </title>
    <body>
        <div>
            <form action = "/Picture" method = "post">
                <p> A photo is taken every 10 minutes. 
                If you want to reconfigure the camera, click here </p>
                <p>
                    <input type="submit" name ="change" value="change" />
                </p>
            </form>
        </div>

        <div id="picture">
        </div>

        <script>
            // Fonction pour redimensionner une image
            function resizeImage(image, newWidth, newHeight) {
              // Création d'un élément <canvas>
              var canvas = document.createElement('canvas');
              canvas.width = newWidth;
              canvas.height = newHeight;
          
              // Dessin de l'image sur le canvas avec la nouvelle taille
              var context = canvas.getContext('2d');
              context.drawImage(image, 0, 0, newWidth, newHeight);
          
              // Conversion du canvas en une nouvelle image
              var resizedImage = new Image();
              resizedImage.src = canvas.toDataURL('image/jpeg');
          
              // Retourne l'image redimensionnée
              return resizedImage;
            }
          
            // Création de l'élément <img>
            var image = document.createElement('img');
          
            // Définition de l'attribut src
            image.src = '/static/photo_recent.jpg';
          
            // Redimensionnement de l'image à la taille souhaitée (640x480)
            var newWidth = 640;
            var newHeight = 480;
            var resizedImage = resizeImage(image, newWidth, newHeight);
          
            // Ajout de l'image redimensionnée à un élément existant avec l'ID "picture"
            document.getElementById('picture').appendChild(resizedImage);
        </script>
    </body>    
